{"version":3,"sources":["webpack:///resources/js/src/app/components/item/ItemImageCarousel.vue","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?55b3","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?a015","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?00e4"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AAEA;AACA,6BADA;AAGA;AACA;AACA,kBADA;AAEA;AAFA,KADA;AAKA;AACA,kBADA;AAEA;AAFA,KALA;AASA;AACA,mBADA;AAEA;AAFA,KATA;AAaA;AACA,mBADA;AAEA;AAFA,KAbA;AAiBA;AACA,kBADA;AAEA;AAFA,KAjBA;AAqBA;AACA,kBADA;AAEA;AAFA;AArBA,GAHA;AA8BA;AACA;AACA;AADA;AADA,GA9BA;AAoCA,MApCA,kBAoCA;AACA;AACA,oBADA;AAEA;AAFA;AAIA,GAzCA;AA2CA;AACA,oBADA,8BACA;AACA;AACA,KAHA;AAKA,kBALA,4BAKA;AACA,8CACA,4BADA,EAEA,YAFA,EAGA,KAHA,CAGA,CAHA,EAGA,gBAHA;AAIA,KAVA;AAYA,gBAZA,0BAYA;AACA,8CACA,4BADA,EAEA,qBAFA,EAGA,KAHA,CAGA,CAHA,EAGA,gBAHA;AAIA;AAjBA,GA3CA;AA+DA;AACA;AACA,aADA,mBACA,GADA,EACA,MADA,EACA;AAAA;;AACA;AACA;AACA;AACA,WAFA,EAEA,CAFA;AAGA;AACA,OAPA;AAQA;AARA;AADA,GA/DA;AA4EA,SA5EA,qBA4EA;AAAA;;AACA;AACA,4BACA,IADA,CACA;AACA;;AACA;AACA,OAJA,EAKA,KALA,CAKA;AACA;AACA,OAPA;AAQA,KATA;AAUA,GAvFA;AAyFA;AACA,iBADA,2BACA;AACA;AACA,KAHA;AAKA,gBALA,0BAKA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA,KApBA;AAsBA,gBAtBA,0BAsBA;AAAA;;AACA;AACA;AACA,wBADA;AAEA,2BAFA;AAGA,gBAHA;AAIA,sBAJA;AAKA,oBALA;AAMA,kBANA;AAOA,iCAPA;AAQA,2BARA;AASA,mBACA,2CADA,EAEA,4CAFA,CATA;AAaA,6BAbA;AAcA,kBACA,mFADA,EAEA,oFAFA,CAdA;AAkBA,uBAlBA;AAmBA;AACA;AAEA,6CACA,gBADA,EAEA,GAFA;AAIA,SA1BA;AA2BA;AACA;AACA;AA7BA;;AAgCA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,0BADA;AAEA;AAFA;AAIA;;AAEA;AACA;AACA,OAFA;AAGA,KAxEA;AA0EA,qBA1EA,+BA0EA;AACA;AACA,wBADA;AAEA,mBAFA;AAGA,gBAHA;AAIA,sBAJA;AAKA,mBALA;AAMA,kBANA;AAOA,wBAPA;AAQA,qBARA;AASA,iBATA;AAUA,mBACA,2CADA,EAEA,4CAFA,CAVA;AAcA,6BAdA;AAeA,kBACA,mFADA,EAEA,oFAFA,CAfA;AAmBA;AAnBA;AAqBA,KAhGA;AAkGA,QAlGA,gBAkGA,KAlGA,EAkGA;AACA;AAEA,uCACA,KADA,EAEA,GAFA;AAIA,KAzGA;AA2GA,cA3GA,sBA2GA,KA3GA,EA2GA;AACA;AACA,KA7GA;AA+GA,gBA/GA,wBA+GA,KA/GA,EA+GA;AACA;AACA,KAjHA;AAmHA,gBAnHA,0BAmHA;AAAA;;AACA;AACA;;AAEA;AACA;AACA,SAFA,MAEA;AACA;;AAEA;AACA;AACA;;AAEA;AAAA;AAAA;;AACA;AAAA;AAAA;;AAEA;AACA;AACA,OAjBA;AAkBA;AAtIA;AAzFA,G;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,SAAS,sDAAsD,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,kCAAkC,sCAAsC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,mBAAmB;AACnB;AACA,sCAAsC,sCAAsC;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,oCAAoC,oCAAoC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpHA;AAAA;AAAA;AAAA;AAAgG;AAC3B;AACL;;;AAGhE;AACsG;AACtG,gBAAgB,2GAAU;AAC1B,EAAE,uFAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAAyM,CAAgB,qPAAG,EAAC,C;;;;;;;;;;;;ACA7N;AAAA;AAAA;AAAA;AAAA;AAAA","file":"chunks/ceres-36.js","sourcesContent":["<template>\n  <div itemscope itemtype=\"https://schema.org/Thing\">\n    <template v-if=\"initialized\">\n      <div ref=\"single\" class=\"single-carousel owl-carousel owl-theme owl-single-item mt-0\">\n        <div v-for=\"(image, index) in singleImages\" :key=\"index\" class=\"prop-1-1\">\n          <a :data-lightbox=\"`single-item-image${_uid}`\" :href=\"image.url\">\n            <lazy-img\n                :alt=\"getAltText(image)\"\n                :image-url=\"`${image.url}.webp`\"\n                :fallback-url=\"image.url\"\n                :title=\"getImageName(image)\"\n                picture-class=\"owl-lazy\" />\n          </a>\n        </div>\n      </div>\n\n      <div v-if=\"showThumbs\" id=\"thumb-carousel\" ref=\"thumbs\" class=\"owl-thumbs owl-carousel owl-theme owl-single-item\">\n        <div v-for=\"(imagePreview, index) in carouselImages\" :key=\"index\" class=\"prop-1-1\">\n          <div class=\"image-container\" @click=\"goTo(index)\">\n            <lazy-img\n                :alt=\"getAltText(imagePreview)\"\n                :image-url=\"`${imagePreview.url}.webp`\"\n                :fallback-url=\"imagePreview.url\"\n                :title=\"getImageName(imagePreview)\"\n                picture-class=\"owl-thumb border-appearance\"\n                v-bind:class=\"{ 'active': currentItem === index}\" />\n          </div>\n        </div>\n      </div>\n    </template>\n\n    <div v-else class=\"single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0\">\n      <div class=\"prop-1-1\">\n        <lazy-img\n            :alt=\"getAltText(singleImages[0].url)\"\n            :image-url=\"`${singleImages[0].url}.webp`\"\n            :fallback-url=\"singleImages[0].url\"\n            :title=\"getImageName(singleImages[0].url)\"\n            picture-class=\"owl-placeholder\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {isNullOrUndefined} from \"../../helper/utils\";\n\nexport default {\n  name: \"item-image-carousel\",\n\n  props: {\n    maxQuantity: {\n      type: Number,\n      default: 10\n    },\n    imageUrlAccessor: {\n      type: String,\n      default: \"url\"\n    },\n    showThumbs: {\n      type: Boolean,\n      default: true\n    },\n    showDots: {\n      type: Boolean,\n      default: true\n    },\n    animationStyle: {\n      type: String,\n      default: \"standard\"\n    },\n    pluginPath: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  inject: {\n    itemId: {\n      default: null\n    }\n  },\n\n  data() {\n    return {\n      currentItem: 0,\n      initialized: false\n    };\n  },\n\n  computed: {\n    currentVariation() {\n      return this.$store.getters[`${this.itemId}/currentItemVariation`]\n    },\n\n    carouselImages() {\n      return this.$options.filters.itemImages(\n          this.currentVariation.images,\n          \"urlPreview\"\n      ).slice(0, this.maxQuantity);\n    },\n\n    singleImages() {\n      return this.$options.filters.itemImages(\n          this.currentVariation.images,\n          this.imageUrlAccessor\n      ).slice(0, this.maxQuantity);\n    }\n  },\n\n  watch: {\n    currentVariation: {\n      handler(val, oldVal) {\n        if (val !== oldVal) {\n          setTimeout(() => {\n            this.reInitialize();\n          }, 1);\n        }\n      },\n      deep: true\n    }\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      this.loadLightbox()\n        .then(() => {\n          this.initCarousel();\n          this.initThumbCarousel();\n        })\n        .catch(event => {\n          console.log(\"error while loading lightbox\", event);\n        });\n    });\n  },\n\n  methods: {\n    getImageCount() {\n      return this.carouselImages.length > this.maxQuantity ? this.maxQuantity : this.carouselImages.length;\n    },\n\n    reInitialize() {\n      const $owl = $(this.$refs.single);\n\n      $owl.trigger(\"destroy.owl.carousel\");\n      $owl.html($owl.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n      $owl.find(\".owl-item\").remove();\n\n      const $thumbs = $(this.$refs.thumbs);\n\n      $thumbs.trigger(\"destroy.owl.carousel\");\n      $thumbs.html($thumbs.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n      $thumbs.find(\".owl-item\").remove();\n\n      this.initCarousel();\n      this.initThumbCarousel();\n    },\n\n    initCarousel() {\n      const imageCount = this.getImageCount();\n      const carouselSettings = {\n        autoHeight: true,\n        dots: this.showDots,\n        items: 1,\n        lazyLoad: true,\n        rewind: true,\n        margin: 10,\n        mouseDrag: imageCount > 1,\n        nav: imageCount > 1,\n        navClass: [\n          \"owl-single-item-nav left carousel-control\",\n          \"owl-single-item-nav right carousel-control\"\n        ],\n        navContainerClass: \"\",\n        navText: [\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n        ],\n        smartSpeed: 350,\n        onChanged: event => {\n          const $thumb = $(this.$refs.thumbs);\n\n          $thumb.trigger(\"to.owl.carousel\", [\n            event.page.index,\n            350\n          ]);\n        },\n        onInitialized: event => {\n          this.initialized = true;\n        }\n      };\n\n      if (this.animationStyle !== \"standard\") {\n        carouselSettings.animateOut = this.animationStyle;\n      }\n\n      $(this.$refs.single).owlCarousel(carouselSettings);\n\n      if (!isNullOrUndefined(window.lightbox)) {\n        lightbox.option({\n          wrapAround: true,\n          albumLabel: this.$translate(\"Ceres::Template.singleItemLightboxImageShown\")\n        });\n      }\n\n      $(this.$refs.single).on(\"changed.owl.carousel\", event => {\n        this.currentItem = event.page.index;\n      });\n    },\n\n    initThumbCarousel() {\n      $(this.$refs.thumbs).owlCarousel({\n        autoHeight: true,\n        dots: false,\n        items: 5,\n        lazyLoad: true,\n        loop: false,\n        margin: 10,\n        mouseDrag: false,\n        center: false,\n        nav: true,\n        navClass: [\n          \"owl-single-item-nav left carousel-control\",\n          \"owl-single-item-nav right carousel-control\"\n        ],\n        navContainerClass: \"\",\n        navText: [\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n        ],\n        smartSpeed: 350\n      });\n    },\n\n    goTo(index) {\n      const $owl = $(this.$refs.single);\n\n      $owl.trigger(\"to.owl.carousel\", [\n        index,\n        350\n      ]);\n    },\n\n    getAltText(image) {\n      return image && image.alternate ? image.alternate : this.$options.filters.itemName(this.currentVariation);\n    },\n\n    getImageName(image) {\n      return image && image.name ? image.name : this.$options.filters.itemName(this.currentVariation);\n    },\n\n    loadLightbox() {\n      return new Promise((resolve, reject) => {\n        const script = document.querySelector(\"script#lightboxscript\");\n\n        if (!isNullOrUndefined(script)) {\n          resolve();\n        } else {\n          const script = document.createElement(\"script\");\n\n          script.type = \"text/javascript\";\n          script.id = \"lightboxscript\";\n          script.src = `${this.pluginPath}/js/dist/lightbox.min.js`;\n\n          script.addEventListener(\"load\", () => resolve(), false);\n          script.addEventListener(\"error\", event => reject(event), false);\n\n          document.body.appendChild(script);\n        }\n      });\n    }\n  }\n}\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { attrs: { itemscope: \"\", itemtype: \"https://schema.org/Thing\" } },\n    [\n      _vm.initialized\n        ? [\n            _c(\n              \"div\",\n              {\n                ref: \"single\",\n                staticClass:\n                  \"single-carousel owl-carousel owl-theme owl-single-item mt-0\"\n              },\n              _vm._l(_vm.singleImages, function(image, index) {\n                return _c(\"div\", { key: index, staticClass: \"prop-1-1\" }, [\n                  _c(\n                    \"a\",\n                    {\n                      attrs: {\n                        \"data-lightbox\": \"single-item-image\" + _vm._uid,\n                        href: image.url\n                      }\n                    },\n                    [\n                      _c(\"lazy-img\", {\n                        attrs: {\n                          alt: _vm.getAltText(image),\n                          \"image-url\": image.url + \".webp\",\n                          \"fallback-url\": image.url,\n                          title: _vm.getImageName(image),\n                          \"picture-class\": \"owl-lazy\"\n                        }\n                      })\n                    ],\n                    1\n                  )\n                ])\n              }),\n              0\n            ),\n            _vm._v(\" \"),\n            _vm.showThumbs\n              ? _c(\n                  \"div\",\n                  {\n                    ref: \"thumbs\",\n                    staticClass:\n                      \"owl-thumbs owl-carousel owl-theme owl-single-item\",\n                    attrs: { id: \"thumb-carousel\" }\n                  },\n                  _vm._l(_vm.carouselImages, function(imagePreview, index) {\n                    return _c(\"div\", { key: index, staticClass: \"prop-1-1\" }, [\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"image-container\",\n                          on: {\n                            click: function($event) {\n                              return _vm.goTo(index)\n                            }\n                          }\n                        },\n                        [\n                          _c(\"lazy-img\", {\n                            class: { active: _vm.currentItem === index },\n                            attrs: {\n                              alt: _vm.getAltText(imagePreview),\n                              \"image-url\": imagePreview.url + \".webp\",\n                              \"fallback-url\": imagePreview.url,\n                              title: _vm.getImageName(imagePreview),\n                              \"picture-class\": \"owl-thumb border-appearance\"\n                            }\n                          })\n                        ],\n                        1\n                      )\n                    ])\n                  }),\n                  0\n                )\n              : _vm._e()\n          ]\n        : _c(\n            \"div\",\n            {\n              staticClass:\n                \"single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0\"\n            },\n            [\n              _c(\n                \"div\",\n                { staticClass: \"prop-1-1\" },\n                [\n                  _c(\"lazy-img\", {\n                    attrs: {\n                      alt: _vm.getAltText(_vm.singleImages[0].url),\n                      \"image-url\": _vm.singleImages[0].url + \".webp\",\n                      \"fallback-url\": _vm.singleImages[0].url,\n                      title: _vm.getImageName(_vm.singleImages[0].url),\n                      \"picture-class\": \"owl-placeholder\"\n                    }\n                  })\n                ],\n                1\n              )\n            ]\n          )\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\"\nimport script from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/cristi/workspace/plugin-ceres/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5285279e')) {\n      api.createRecord('5285279e', component.options)\n    } else {\n      api.reload('5285279e', component.options)\n    }\n    module.hot.accept(\"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\", function () {\n      api.rerender('5285279e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/app/components/item/ItemImageCarousel.vue\"\nexport default component.exports","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=template&id=5285279e&\""],"sourceRoot":""}