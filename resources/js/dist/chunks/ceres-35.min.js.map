{"version":3,"sources":["webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?55b3","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?a015","webpack:///resources/js/src/app/components/item/ItemImageCarousel.vue","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","itemscope","itemtype","initialized","ref","staticClass","_l","singleImages","image","index","key","_uid","href","url","alt","getAltText","title","getImageName","_v","showThumbs","id","carouselImages","imagePreview","on","click","$event","goTo","class","active","currentItem","_e","_withStripped","name","props","maxQuantity","type","Number","default","imageUrlAccessor","String","Boolean","showDots","animationStyle","pluginPath","inject","itemId","data","computed","currentVariation","$store","getters","$options","filters","itemImages","watch","handler","val","oldVal","setTimeout","deep","mounted","$nextTick","methods","getImageCount","length","reInitialize","$owl","trigger","html","find","removeClass","remove","$thumbs","initCarousel","initThumbCarousel","autoHeight","dots","items","lazyLoad","rewind","margin","mouseDrag","imageCount","nav","navClass","navContainerClass","navText","smartSpeed","onChanged","onInitialized","carouselSettings","animateOut","$","$refs","single","owlCarousel","lightbox","option","wrapAround","albumLabel","$translate","thumbs","loop","center","alternate","itemName","loadLightbox","Promise","document","body","appendChild","resolve","component","options","__file"],"mappings":"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","file":"chunks/ceres-35.min.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { attrs: { itemscope: \"\", itemtype: \"https://schema.org/Thing\" } },\n    [\n      _vm.initialized\n        ? [\n            _c(\n              \"div\",\n              {\n                ref: \"single\",\n                staticClass:\n                  \"single-carousel owl-carousel owl-theme owl-single-item mt-0\"\n              },\n              _vm._l(_vm.singleImages, function(image, index) {\n                return _c(\"div\", { key: index, staticClass: \"prop-1-1\" }, [\n                  _c(\n                    \"a\",\n                    {\n                      attrs: {\n                        \"data-lightbox\": \"single-item-image\" + _vm._uid,\n                        href: image.url\n                      }\n                    },\n                    [\n                      _c(\"lazy-img\", {\n                        attrs: {\n                          alt: _vm.getAltText(image),\n                          \"image-url\": image.url + \".webp\",\n                          \"fallback-url\": image.url,\n                          title: _vm.getImageName(image),\n                          \"picture-class\": \"owl-lazy\"\n                        }\n                      })\n                    ],\n                    1\n                  )\n                ])\n              }),\n              0\n            ),\n            _vm._v(\" \"),\n            _vm.showThumbs\n              ? _c(\n                  \"div\",\n                  {\n                    ref: \"thumbs\",\n                    staticClass:\n                      \"owl-thumbs owl-carousel owl-theme owl-single-item\",\n                    attrs: { id: \"thumb-carousel\" }\n                  },\n                  _vm._l(_vm.carouselImages, function(imagePreview, index) {\n                    return _c(\"div\", { key: index, staticClass: \"prop-1-1\" }, [\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"image-container\",\n                          on: {\n                            click: function($event) {\n                              return _vm.goTo(index)\n                            }\n                          }\n                        },\n                        [\n                          _c(\"lazy-img\", {\n                            class: { active: _vm.currentItem === index },\n                            attrs: {\n                              alt: _vm.getAltText(imagePreview),\n                              \"image-url\": imagePreview.url + \".webp\",\n                              \"fallback-url\": imagePreview.url,\n                              title: _vm.getImageName(imagePreview),\n                              \"picture-class\": \"owl-thumb border-appearance\"\n                            }\n                          })\n                        ],\n                        1\n                      )\n                    ])\n                  }),\n                  0\n                )\n              : _vm._e()\n          ]\n        : _c(\n            \"div\",\n            {\n              staticClass:\n                \"single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0\"\n            },\n            [\n              _c(\n                \"div\",\n                { staticClass: \"prop-1-1\" },\n                [\n                  _c(\"lazy-img\", {\n                    attrs: {\n                      alt: _vm.getAltText(_vm.singleImages[0].url),\n                      \"image-url\": _vm.singleImages[0].url + \".webp\",\n                      \"fallback-url\": _vm.singleImages[0].url,\n                      title: _vm.getImageName(_vm.singleImages[0].url),\n                      \"picture-class\": \"owl-placeholder\"\n                    }\n                  })\n                ],\n                1\n              )\n            ]\n          )\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"","<template>\n  <div itemscope itemtype=\"https://schema.org/Thing\">\n    <template v-if=\"initialized\">\n      <div ref=\"single\" class=\"single-carousel owl-carousel owl-theme owl-single-item mt-0\">\n        <div v-for=\"(image, index) in singleImages\" :key=\"index\" class=\"prop-1-1\">\n          <a :data-lightbox=\"`single-item-image${_uid}`\" :href=\"image.url\">\n            <lazy-img\n                :alt=\"getAltText(image)\"\n                :image-url=\"`${image.url}.webp`\"\n                :fallback-url=\"image.url\"\n                :title=\"getImageName(image)\"\n                picture-class=\"owl-lazy\" />\n          </a>\n        </div>\n      </div>\n\n      <div v-if=\"showThumbs\" id=\"thumb-carousel\" ref=\"thumbs\" class=\"owl-thumbs owl-carousel owl-theme owl-single-item\">\n        <div v-for=\"(imagePreview, index) in carouselImages\" :key=\"index\" class=\"prop-1-1\">\n          <div class=\"image-container\" @click=\"goTo(index)\">\n            <lazy-img\n                :alt=\"getAltText(imagePreview)\"\n                :image-url=\"`${imagePreview.url}.webp`\"\n                :fallback-url=\"imagePreview.url\"\n                :title=\"getImageName(imagePreview)\"\n                picture-class=\"owl-thumb border-appearance\"\n                v-bind:class=\"{ 'active': currentItem === index}\" />\n          </div>\n        </div>\n      </div>\n    </template>\n\n    <div v-else class=\"single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0\">\n      <div class=\"prop-1-1\">\n        <lazy-img\n            :alt=\"getAltText(singleImages[0].url)\"\n            :image-url=\"`${singleImages[0].url}.webp`\"\n            :fallback-url=\"singleImages[0].url\"\n            :title=\"getImageName(singleImages[0].url)\"\n            picture-class=\"owl-placeholder\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {isNullOrUndefined} from \"../../helper/utils\";\n\nexport default {\n  name: \"item-image-carousel\",\n\n  props: {\n    maxQuantity: {\n      type: Number,\n      default: 10\n    },\n    imageUrlAccessor: {\n      type: String,\n      default: \"url\"\n    },\n    showThumbs: {\n      type: Boolean,\n      default: true\n    },\n    showDots: {\n      type: Boolean,\n      default: true\n    },\n    animationStyle: {\n      type: String,\n      default: \"standard\"\n    },\n    pluginPath: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  inject: {\n    itemId: {\n      default: null\n    }\n  },\n\n  data() {\n    return {\n      currentItem: 0,\n      initialized: false\n    };\n  },\n\n  computed: {\n    currentVariation() {\n      return this.$store.getters[`${this.itemId}/currentItemVariation`]\n    },\n\n    carouselImages() {\n      return this.$options.filters.itemImages(\n          this.currentVariation.images,\n          \"urlPreview\"\n      ).slice(0, this.maxQuantity);\n    },\n\n    singleImages() {\n      return this.$options.filters.itemImages(\n          this.currentVariation.images,\n          this.imageUrlAccessor\n      ).slice(0, this.maxQuantity);\n    }\n  },\n\n  watch: {\n    currentVariation: {\n      handler(val, oldVal) {\n        if (val !== oldVal) {\n          setTimeout(() => {\n            this.reInitialize();\n          }, 1);\n        }\n      },\n      deep: true\n    }\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      this.loadLightbox()\n        .then(() => {\n          this.initCarousel();\n          this.initThumbCarousel();\n        })\n        .catch(event => {\n          console.log(\"error while loading lightbox\", event);\n        });\n    });\n  },\n\n  methods: {\n    getImageCount() {\n      return this.carouselImages.length > this.maxQuantity ? this.maxQuantity : this.carouselImages.length;\n    },\n\n    reInitialize() {\n      const $owl = $(this.$refs.single);\n\n      $owl.trigger(\"destroy.owl.carousel\");\n      $owl.html($owl.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n      $owl.find(\".owl-item\").remove();\n\n      const $thumbs = $(this.$refs.thumbs);\n\n      $thumbs.trigger(\"destroy.owl.carousel\");\n      $thumbs.html($thumbs.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n      $thumbs.find(\".owl-item\").remove();\n\n      this.initCarousel();\n      this.initThumbCarousel();\n    },\n\n    initCarousel() {\n      const imageCount = this.getImageCount();\n      const carouselSettings = {\n        autoHeight: true,\n        dots: this.showDots,\n        items: 1,\n        lazyLoad: true,\n        rewind: true,\n        margin: 10,\n        mouseDrag: imageCount > 1,\n        nav: imageCount > 1,\n        navClass: [\n          \"owl-single-item-nav left carousel-control\",\n          \"owl-single-item-nav right carousel-control\"\n        ],\n        navContainerClass: \"\",\n        navText: [\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n        ],\n        smartSpeed: 350,\n        onChanged: event => {\n          const $thumb = $(this.$refs.thumbs);\n\n          $thumb.trigger(\"to.owl.carousel\", [\n            event.page.index,\n            350\n          ]);\n        },\n        onInitialized: event => {\n          this.initialized = true;\n        }\n      };\n\n      if (this.animationStyle !== \"standard\") {\n        carouselSettings.animateOut = this.animationStyle;\n      }\n\n      $(this.$refs.single).owlCarousel(carouselSettings);\n\n      if (!isNullOrUndefined(window.lightbox)) {\n        lightbox.option({\n          wrapAround: true,\n          albumLabel: this.$translate(\"Ceres::Template.singleItemLightboxImageShown\")\n        });\n      }\n\n      $(this.$refs.single).on(\"changed.owl.carousel\", event => {\n        this.currentItem = event.page.index;\n      });\n    },\n\n    initThumbCarousel() {\n      $(this.$refs.thumbs).owlCarousel({\n        autoHeight: true,\n        dots: false,\n        items: 5,\n        lazyLoad: true,\n        loop: false,\n        margin: 10,\n        mouseDrag: false,\n        center: false,\n        nav: true,\n        navClass: [\n          \"owl-single-item-nav left carousel-control\",\n          \"owl-single-item-nav right carousel-control\"\n        ],\n        navContainerClass: \"\",\n        navText: [\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n        ],\n        smartSpeed: 350\n      });\n    },\n\n    goTo(index) {\n      const $owl = $(this.$refs.single);\n\n      $owl.trigger(\"to.owl.carousel\", [\n        index,\n        350\n      ]);\n    },\n\n    getAltText(image) {\n      return image && image.alternate ? image.alternate : this.$options.filters.itemName(this.currentVariation);\n    },\n\n    getImageName(image) {\n      return image && image.name ? image.name : this.$options.filters.itemName(this.currentVariation);\n    },\n\n    loadLightbox() {\n      return new Promise((resolve, reject) => {\n        const script = document.querySelector(\"script#lightboxscript\");\n\n        if (!isNullOrUndefined(script)) {\n          resolve();\n        } else {\n          const script = document.createElement(\"script\");\n\n          script.type = \"text/javascript\";\n          script.id = \"lightboxscript\";\n          script.src = `${this.pluginPath}/js/dist/lightbox.min.js`;\n\n          script.addEventListener(\"load\", () => resolve(), false);\n          script.addEventListener(\"error\", event => reject(event), false);\n\n          document.body.appendChild(script);\n        }\n      });\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\"\nimport script from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/cristi/workspace/plugin-ceres/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5285279e')) {\n      api.createRecord('5285279e', component.options)\n    } else {\n      api.reload('5285279e', component.options)\n    }\n    module.hot.accept(\"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\", function () {\n      api.rerender('5285279e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/app/components/item/ItemImageCarousel.vue\"\nexport default component.exports"],"sourceRoot":""}