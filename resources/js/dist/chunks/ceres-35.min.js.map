{"version":3,"sources":["webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?55b3","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?a015","webpack:///resources/js/src/app/components/item/ItemImageCarousel.vue","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","itemscope","itemtype","ref","staticClass","_l","singleImages","image","index","key","_uid","href","url","alt","getAltText","title","getImageName","_v","showThumbs","id","carouselImages","imagePreview","on","click","$event","goTo","class","active","currentItem","_e","initialized","src","_withStripped","name","props","maxQuantity","type","Number","default","imageUrlAccessor","String","Boolean","showDots","animationStyle","pluginPath","inject","itemId","data","computed","currentVariation","$store","getters","$options","filters","itemImages","watch","handler","val","oldVal","setTimeout","deep","mounted","$nextTick","methods","getImageCount","length","reInitialize","$owl","trigger","html","find","removeClass","remove","$thumbs","initCarousel","initThumbCarousel","autoHeight","dots","items","lazyLoad","rewind","margin","mouseDrag","imageCount","nav","navClass","navContainerClass","navText","smartSpeed","onChanged","onInitialized","carouselSettings","animateOut","$","$refs","single","owlCarousel","lightbox","option","wrapAround","albumLabel","$translate","thumbs","loop","center","alternate","itemName","loadLightbox","Promise","document","body","appendChild","resolve","component","options","__file"],"mappings":"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","file":"chunks/ceres-35.min.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { attrs: { itemscope: \"\", itemtype: \"https://schema.org/Thing\" } },\n    [\n      [\n        _c(\n          \"div\",\n          {\n            ref: \"single\",\n            staticClass:\n              \"single-carousel owl-carousel owl-theme owl-single-item mt-0\"\n          },\n          _vm._l(_vm.singleImages, function(image, index) {\n            return _c(\"div\", { key: index, staticClass: \"prop-1-1\" }, [\n              _c(\n                \"a\",\n                {\n                  attrs: {\n                    \"data-lightbox\": \"single-item-image\" + _vm._uid,\n                    href: image.url\n                  }\n                },\n                [\n                  _c(\"lazy-img\", {\n                    attrs: {\n                      alt: _vm.getAltText(image),\n                      \"image-url\": image.url + \".webp\",\n                      \"fallback-url\": image.url,\n                      title: _vm.getImageName(image),\n                      \"picture-class\": \"owl-lazy\"\n                    }\n                  })\n                ],\n                1\n              )\n            ])\n          }),\n          0\n        ),\n        _vm._v(\" \"),\n        _vm.showThumbs\n          ? _c(\n              \"div\",\n              {\n                ref: \"thumbs\",\n                staticClass:\n                  \"owl-thumbs owl-carousel owl-theme owl-single-item\",\n                attrs: { id: \"thumb-carousel\" }\n              },\n              _vm._l(_vm.carouselImages, function(imagePreview, index) {\n                return _c(\"div\", { key: index, staticClass: \"prop-1-1\" }, [\n                  _c(\n                    \"div\",\n                    {\n                      staticClass: \"image-container\",\n                      on: {\n                        click: function($event) {\n                          return _vm.goTo(index)\n                        }\n                      }\n                    },\n                    [\n                      _c(\"lazy-img\", {\n                        class: { active: _vm.currentItem === index },\n                        attrs: {\n                          alt: _vm.getAltText(imagePreview),\n                          \"image-url\": imagePreview.url + \".webp\",\n                          \"fallback-url\": imagePreview.url,\n                          title: _vm.getImageName(imagePreview),\n                          \"picture-class\": \"owl-thumb border-appearance\"\n                        }\n                      })\n                    ],\n                    1\n                  )\n                ])\n              }),\n              0\n            )\n          : _vm._e()\n      ],\n      _vm._v(\" \"),\n      !_vm.initialized\n        ? _c(\n            \"div\",\n            {\n              staticClass:\n                \"single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0\"\n            },\n            [\n              _c(\"div\", { staticClass: \"prop-1-1\" }, [\n                _c(\"img\", {\n                  staticClass: \"owl-placeholder\",\n                  attrs: {\n                    alt: _vm.getAltText(_vm.singleImages[0].url),\n                    src: _vm.singleImages[0].url,\n                    title: _vm.getImageName(_vm.singleImages[0].url)\n                  }\n                })\n              ])\n            ]\n          )\n        : _vm._e()\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"","<template>\n  <div itemscope itemtype=\"https://schema.org/Thing\">\n    <template>\n      <div ref=\"single\" class=\"single-carousel owl-carousel owl-theme owl-single-item mt-0\">\n        <div v-for=\"(image, index) in singleImages\" :key=\"index\" class=\"prop-1-1\">\n          <a :data-lightbox=\"`single-item-image${_uid}`\" :href=\"image.url\">\n            <lazy-img\n                :alt=\"getAltText(image)\"\n                :image-url=\"`${image.url}.webp`\"\n                :fallback-url=\"image.url\"\n                :title=\"getImageName(image)\"\n                picture-class=\"owl-lazy\">\n            </lazy-img>\n          </a>\n        </div>\n      </div>\n\n      <div v-if=\"showThumbs\" id=\"thumb-carousel\" ref=\"thumbs\" class=\"owl-thumbs owl-carousel owl-theme owl-single-item\">\n        <div v-for=\"(imagePreview, index) in carouselImages\" :key=\"index\" class=\"prop-1-1\">\n          <div class=\"image-container\" @click=\"goTo(index)\">\n            <lazy-img\n                :alt=\"getAltText(imagePreview)\"\n                :image-url=\"`${imagePreview.url}.webp`\"\n                :fallback-url=\"imagePreview.url\"\n                :title=\"getImageName(imagePreview)\"\n                picture-class=\"owl-thumb border-appearance\"\n                v-bind:class=\"{ 'active': currentItem === index}\">\n            </lazy-img>\n          </div>\n        </div>\n      </div>\n    </template>\n    <div v-if=\"!initialized\" class=\"single-carousel owl-carousel owl-loaded owl-theme owl-single-item mt-0\">\n      <div class=\"prop-1-1\">\n        <img\n            :alt=\"getAltText(singleImages[0].url)\"\n            :src=\"singleImages[0].url\"\n            :title=\"getImageName(singleImages[0].url)\"\n            class=\"owl-placeholder\"\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {isNullOrUndefined} from \"../../helper/utils\";\n\nexport default {\n  name: \"item-image-carousel\",\n\n  props: {\n    maxQuantity: {\n      type: Number,\n      default: 10\n    },\n    imageUrlAccessor: {\n      type: String,\n      default: \"url\"\n    },\n    showThumbs: {\n      type: Boolean,\n      default: true\n    },\n    showDots: {\n      type: Boolean,\n      default: true\n    },\n    animationStyle: {\n      type: String,\n      default: \"standard\"\n    },\n    pluginPath: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  inject: {\n    itemId: {\n      default: null\n    }\n  },\n\n  data() {\n    return {\n      currentItem: 0,\n      initialized: false\n    };\n  },\n\n  computed: {\n    currentVariation() {\n      return this.$store.getters[`${this.itemId}/currentItemVariation`]\n    },\n\n    carouselImages() {\n      return this.$options.filters.itemImages(\n          this.currentVariation.images,\n          \"urlPreview\"\n      ).slice(0, this.maxQuantity);\n    },\n\n    singleImages() {\n      return this.$options.filters.itemImages(\n          this.currentVariation.images,\n          this.imageUrlAccessor\n      ).slice(0, this.maxQuantity);\n    }\n  },\n\n  watch: {\n    currentVariation: {\n      handler(val, oldVal) {\n        if (val !== oldVal) {\n          setTimeout(() => {\n            this.reInitialize();\n          }, 1);\n        }\n      },\n      deep: true\n    }\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      this.loadLightbox()\n        .then(() => {\n          this.initCarousel();\n          this.initThumbCarousel();\n        })\n        .catch(event => {\n          console.log(\"error while loading lightbox\", event);\n        });\n    });\n  },\n\n  methods: {\n    getImageCount() {\n      return this.carouselImages.length > this.maxQuantity ? this.maxQuantity : this.carouselImages.length;\n    },\n\n    reInitialize() {\n      const $owl = $(this.$refs.single);\n\n      $owl.trigger(\"destroy.owl.carousel\");\n      $owl.html($owl.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n      $owl.find(\".owl-item\").remove();\n\n      const $thumbs = $(this.$refs.thumbs);\n\n      $thumbs.trigger(\"destroy.owl.carousel\");\n      $thumbs.html($thumbs.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n      $thumbs.find(\".owl-item\").remove();\n\n      this.initCarousel();\n      this.initThumbCarousel();\n    },\n\n    initCarousel() {\n      const imageCount = this.getImageCount();\n      const carouselSettings = {\n        autoHeight: true,\n        dots: this.showDots,\n        items: 1,\n        lazyLoad: true,\n        rewind: true,\n        margin: 10,\n        mouseDrag: imageCount > 1,\n        nav: imageCount > 1,\n        navClass: [\n          \"owl-single-item-nav left carousel-control\",\n          \"owl-single-item-nav right carousel-control\"\n        ],\n        navContainerClass: \"\",\n        navText: [\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n        ],\n        smartSpeed: 350,\n        onChanged: event => {\n          const $thumb = $(this.$refs.thumbs);\n\n          $thumb.trigger(\"to.owl.carousel\", [\n            event.page.index,\n            350\n          ]);\n        },\n        onInitialized: event => {\n          this.initialized = true;\n        }\n      };\n\n      if (this.animationStyle !== \"standard\") {\n        carouselSettings.animateOut = this.animationStyle;\n      }\n\n      $(this.$refs.single).owlCarousel(carouselSettings);\n\n      if (!isNullOrUndefined(window.lightbox)) {\n        lightbox.option({\n          wrapAround: true,\n          albumLabel: this.$translate(\"Ceres::Template.singleItemLightboxImageShown\")\n        });\n      }\n\n      $(this.$refs.single).on(\"changed.owl.carousel\", event => {\n        this.currentItem = event.page.index;\n      });\n    },\n\n    initThumbCarousel() {\n      $(this.$refs.thumbs).owlCarousel({\n        autoHeight: true,\n        dots: false,\n        items: 5,\n        lazyLoad: true,\n        loop: false,\n        margin: 10,\n        mouseDrag: false,\n        center: false,\n        nav: true,\n        navClass: [\n          \"owl-single-item-nav left carousel-control\",\n          \"owl-single-item-nav right carousel-control\"\n        ],\n        navContainerClass: \"\",\n        navText: [\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n          \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n        ],\n        smartSpeed: 350\n      });\n    },\n\n    goTo(index) {\n      const $owl = $(this.$refs.single);\n\n      $owl.trigger(\"to.owl.carousel\", [\n        index,\n        350\n      ]);\n    },\n\n    getAltText(image) {\n      return image && image.alternate ? image.alternate : this.$options.filters.itemName(this.currentVariation);\n    },\n\n    getImageName(image) {\n      return image && image.name ? image.name : this.$options.filters.itemName(this.currentVariation);\n    },\n\n    loadLightbox() {\n      return new Promise((resolve, reject) => {\n        const script = document.querySelector(\"script#lightboxscript\");\n\n        if (!isNullOrUndefined(script)) {\n          resolve();\n        } else {\n          const script = document.createElement(\"script\");\n\n          script.type = \"text/javascript\";\n          script.id = \"lightboxscript\";\n          script.src = `${this.pluginPath}/js/dist/lightbox.min.js`;\n\n          script.addEventListener(\"load\", () => resolve(), false);\n          script.addEventListener(\"error\", event => reject(event), false);\n\n          document.body.appendChild(script);\n        }\n      });\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\"\nimport script from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/cristi/workspace/plugin-ceres/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5285279e')) {\n      api.createRecord('5285279e', component.options)\n    } else {\n      api.reload('5285279e', component.options)\n    }\n    module.hot.accept(\"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\", function () {\n      api.rerender('5285279e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/app/components/item/ItemImageCarousel.vue\"\nexport default component.exports"],"sourceRoot":""}